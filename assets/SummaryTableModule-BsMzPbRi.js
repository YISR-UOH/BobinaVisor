const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DataUtils-BmXgMy4O.js","assets/vendor-danfo-DUF2pp_5.js","assets/vendor-react-c5ypKtDW.js"])))=>i.map(i=>d[i]);
import{_ as b,j as t}from"./index-D3kOA-mb.js";import{r as x,R as w,L as S,C as v,X as D,Y as g,T as C,a as N,b as j}from"./vendor-recharts-BGBa-r-z.js";import"./vendor-react-c5ypKtDW.js";function L(n,c=20){const[s,l]=x.useState(null),[m,r]=x.useState(!1),[f,d]=x.useState(null);return x.useEffect(()=>{if(!n||n.length===0){l(null),d(null),r(!1);return}r(!0),d(null),(async()=>{try{const{getLastNDays:o,countItemsbyDate:h}=await b(async()=>{const{getLastNDays:u,countItemsbyDate:i}=await import("./DataUtils-BmXgMy4O.js");return{getLastNDays:u,countItemsbyDate:i}},__vite__mapDeps([0,1,2])),e=await o(n,c);if(!e||e.shape[0]===0){l(null),r(!1);return}const a=h(e);if(!a||a.shape[0]===0){l(null),r(!1);return}l({columns:a.columns,rows:a.values}),r(!1)}catch(o){d(o.message),r(!1)}})()},[n,c]),{data:s,loading:m,error:f}}function E({files:n,n:c=20}){const{data:s,loading:l,error:m}=L(n,c);if(l)return t.jsx("div",{className:"my-4 text-slate-700",children:"Cargando resumen..."});if(m)return t.jsxs("div",{className:"my-4 text-red-600",children:["Error SummaryTable: ",m]});if(!s||!s.rows||s.rows.length===0)return t.jsx("div",{className:"my-4 text-slate-600",children:"No hay datos para mostrar."});const r=s.columns.indexOf("Date created"),f=s.columns.indexOf("COMPLETA"),d=s.columns.indexOf("Cantidad"),o=new Map;for(const e of s.rows){const a=String(e[r]),i=String(e[f]??"").trim().toLowerCase(),p=Number(e[d]??0)||0;o.has(a)||o.set(a,{date:a,Saldo:0,Completa:0});const y=o.get(a);i==="saldo"?y.Saldo+=p:i==="completa"&&(y.Completa+=p)}const h=Array.from(o.values()).sort((e,a)=>e.date.localeCompare(a.date));return t.jsxs("div",{className:"my-4 overflow-x-auto",children:[t.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Resumen por fecha y estado"}),t.jsx("div",{className:"mb-3 h-80 w-full",children:t.jsx(w,{children:t.jsxs(S,{data:h,margin:{top:10,right:30,bottom:5,left:0},children:[t.jsx(v,{strokeDasharray:"3 3"}),t.jsx(D,{dataKey:"date",tick:{fontSize:11},angle:-25,textAnchor:"end",height:50}),t.jsx(g,{yAxisId:"left",tick:{fontSize:11},label:{value:"Saldo",angle:-90,position:"insideLeft",offset:10}}),t.jsx(g,{yAxisId:"right",orientation:"right",tick:{fontSize:11},label:{value:"Completa",angle:-90,position:"insideRight",offset:10}}),t.jsx(C,{}),t.jsx(N,{wrapperStyle:{fontSize:12}}),t.jsx(j,{yAxisId:"left",type:"monotone",dataKey:"Saldo",stroke:"#2c7be5",strokeWidth:2,dot:{r:2},activeDot:{r:4}}),t.jsx(j,{yAxisId:"right",type:"monotone",dataKey:"Completa",stroke:"#e55353",strokeWidth:2,dot:{r:2},activeDot:{r:4}})]})})}),t.jsxs("table",{className:"w-full border-collapse text-[12px]",children:[t.jsx("thead",{children:t.jsx("tr",{children:s.columns.map(e=>t.jsx("th",{className:"border border-slate-200 bg-slate-50 px-2 py-1 text-left font-semibold text-slate-900",children:e},e))})}),t.jsx("tbody",{children:s.rows.map((e,a)=>t.jsx("tr",{children:e.map((u,i)=>t.jsx("td",{className:"whitespace-nowrap border border-slate-100 px-2 py-1 text-center",children:u},i))},a))})]})]})}export{E as default};
